(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,32254,e=>{"use strict";let t=(0,e.i(14560).default)("camera",[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);e.s(["Camera",()=>t],32254)},90533,e=>{"use strict";let t=(0,e.i(14560).default)("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);e.s(["FileText",()=>t],90533)},56245,e=>{"use strict";var t=e.i(79071),a=e.i(91176),r=e.i(55187),i=e.i(90533),s=e.i(32254),o=e.i(14560);let c=(0,o.default)("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),l=(0,o.default)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);function d(){let e=(0,a.useRouter)(),o=(0,a.usePathname)();return(0,t.jsxs)("div",{className:"fixed bottom-0 left-0 right-0 bg-green-600 px-4 py-2 flex justify-around items-center",children:[(0,t.jsxs)(r.Button,{variant:"ghost",size:"sm",onClick:()=>e.push("/materials"),className:`flex flex-col items-center gap-1 p-2 ${"/materials"===o?"text-white":"text-green-100"}`,children:[(0,t.jsx)(i.FileText,{className:"w-6 h-6"}),(0,t.jsx)("span",{className:"text-xs",children:"Materials"})]}),(0,t.jsxs)(r.Button,{variant:"ghost",size:"sm",onClick:()=>e.push("/scan"),className:`flex flex-col items-center gap-1 p-2 ${"/scan"===o?"text-white":"text-green-100"}`,children:[(0,t.jsx)(s.Camera,{className:"w-6 h-6"}),(0,t.jsx)("span",{className:"text-xs",children:"Scan"})]}),(0,t.jsxs)(r.Button,{variant:"ghost",size:"sm",onClick:()=>e.push("/leaderboard"),className:`flex flex-col items-center gap-1 p-2 ${"/leaderboard"===o?"text-white":"text-green-100"}`,children:[(0,t.jsx)(c,{className:"w-6 h-6"}),(0,t.jsx)("span",{className:"text-xs",children:"Leaderboard"})]}),(0,t.jsxs)(r.Button,{variant:"ghost",size:"sm",onClick:()=>e.push("/user"),className:`flex flex-col items-center gap-1 p-2 ${"/user"===o?"text-white":"text-green-100"}`,children:[(0,t.jsx)(l,{className:"w-6 h-6"}),(0,t.jsx)("span",{className:"text-xs",children:"User"})]})]})}e.s(["BottomNavigation",()=>d],56245)},24797,e=>{"use strict";e.i(16161);var t=e.i(7253),a=e.i(1371);let r="materials",i=async(e,i)=>{if(!a.db)throw Error("Firebase Firestore not initialized");try{return(await (0,t.addDoc)((0,t.collection)(a.db,r),{ownerUid:e,materialName:i.materialName,howToRecycle:i.howToRecycle,discoveredAt:t.Timestamp.fromDate(i.discoveredAt),similarMaterials:i.similarMaterials,imagePath:i.imagePath,audioPath:i.audioPath,createdAt:(0,t.serverTimestamp)(),updatedAt:(0,t.serverTimestamp)()})).id}catch(e){throw console.error("Error creating material:",e),e}},s=async(e,i={})=>{if(!a.db)throw Error("Firebase Firestore not initialized");try{let s,o=(0,t.query)((0,t.collection)(a.db,r),(0,t.where)("ownerUid","==",e),(0,t.orderBy)("discoveredAt","desc"));i.limit&&(o=(0,t.query)(o,(0,t.limit)(i.limit))),i.cursor&&(o=(0,t.query)(o,(0,t.startAfter)(i.cursor)));let c=await (0,t.getDocs)(o),l=[];return c.forEach(e=>{let t=e.data(),a={id:e.id,ownerUid:t.ownerUid,materialName:t.materialName,howToRecycle:t.howToRecycle,discoveredAt:t.discoveredAt?.toDate()||new Date,similarMaterials:t.similarMaterials||[],imagePath:t.imagePath,audioPath:t.audioPath,createdAt:t.createdAt?.toDate()||new Date,updatedAt:t.updatedAt?.toDate()||new Date};(!i.search||a.materialName.toLowerCase().includes(i.search.toLowerCase()))&&l.push(a)}),c.docs.length>0&&(s=c.docs[c.docs.length-1]),{materials:l,nextCursor:s}}catch(e){throw console.error("Error listing materials:",e),e}},o=async(e,i)=>{if(!a.db)throw Error("Firebase Firestore not initialized");try{let s=(0,t.doc)(a.db,r,i),o=await (0,t.getDoc)(s);if(!o.exists())return null;let c=o.data();if(c.ownerUid!==e)throw Error("Unauthorized access to material");return{id:o.id,ownerUid:c.ownerUid,materialName:c.materialName,howToRecycle:c.howToRecycle,discoveredAt:c.discoveredAt?.toDate()||new Date,similarMaterials:c.similarMaterials||[],imagePath:c.imagePath,audioPath:c.audioPath,createdAt:c.createdAt?.toDate()||new Date,updatedAt:c.updatedAt?.toDate()||new Date}}catch(e){throw console.error("Error getting material:",e),e}},c=async(e,i,s)=>{if(!a.db)throw Error("Firebase Firestore not initialized");try{let o=(0,t.doc)(a.db,r,i),c=await (0,t.getDoc)(o);if(!c.exists()||c.data().ownerUid!==e)throw Error("Unauthorized access to material");let l={...s,updatedAt:(0,t.serverTimestamp)()};s.discoveredAt&&(l.discoveredAt=t.Timestamp.fromDate(s.discoveredAt)),await (0,t.updateDoc)(o,l)}catch(e){throw console.error("Error updating material:",e),e}},l=async(e,i)=>{if(!a.db)throw Error("Firebase Firestore not initialized");try{let s=(0,t.doc)(a.db,r,i),o=await (0,t.getDoc)(s);if(!o.exists()||o.data().ownerUid!==e)throw Error("Unauthorized access to material");await (0,t.deleteDoc)(s)}catch(e){throw console.error("Error deleting material:",e),e}},d=async e=>{if(!a.db)throw Error("Firebase Firestore not initialized");try{let i=(0,t.query)((0,t.collection)(a.db,r),(0,t.where)("ownerUid","==",e)),s=(await (0,t.getDocs)(i)).size,o=new Date;o.setDate(o.getDate()-7);let c=(0,t.query)((0,t.collection)(a.db,r),(0,t.where)("ownerUid","==",e),(0,t.where)("discoveredAt",">=",t.Timestamp.fromDate(o)),(0,t.orderBy)("discoveredAt","asc")),l=(await (0,t.getDocs)(c)).size;return{totalDiscovered:s,discoveredThisWeek:l,points:s}}catch(e){throw console.error("Error computing user stats:",e),e}};e.s(["createMaterial",0,i,"deleteMaterial",0,l,"getMaterial",0,o,"getUserStats",0,d,"listMaterials",0,s,"updateMaterial",0,c])},65976,e=>{e.v(e=>Promise.resolve().then(()=>e(24797)))}]);